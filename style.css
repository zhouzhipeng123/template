/* =========================
   Anki æ¨¡æ¿ Â· Apple é£æ ¼ Â· å»æ°´å°ç‰ˆ
   ========================= */

/* ---------- æœ¬åœ°å­—ä½“ï¼ˆå¯é€‰ä¿ç•™ï¼‰ ---------- */
@font-face { font-family: yh; src: url('_FZYHJW.ttf'); font-display: swap; }
@font-face { font-family: times; src: url('_times.ttf'); font-display: swap; }

/* ---------- è®¾è®¡å˜é‡ ---------- */
:root {
  /* æ–‡æœ¬ä¸åŸºç¡€ */
  --fg:#1c1c1e; --bg:#ffffff; --muted:#666; --line:#dcdcdc;

  /* iOS è‰²æ¿ */
  --ios-label:#1c1c1e;
  --ios-secondary:rgba(60,60,67,0.6);
  --ios-tertiary:rgba(60,60,67,0.3);
  --ios-quaternary:rgba(60,60,67,0.18);
  --ios-separator:rgba(60,60,67,0.29);
  --ios-blue:#0a84ff; --ios-green:#34c759; --ios-orange:#ff9f0a;

  /* èƒŒæ™¯ä¸å¡ç‰‡ */
  --ios-bg:#f5f6f7;
  --ios-card:rgba(255,255,255,0.86);
  --ios-card-alt:rgba(255,255,255,0.72);

  /* å°ºå¯¸ä¸æ’ç‰ˆ */
  --radius:10px; --pad:0.6rem; --gap:0.75rem;
  --ios-radius:14px; --ios-pad-y:0.7rem; --ios-pad-x:0.9rem; --ios-gap:0.7rem;
  --fs-base:clamp(1rem,2.5vw,1.25rem);
  --fs-title:clamp(1.15rem,3vw,1.35rem);
  --lh:1.6;

  /* å­—é‡ */
  --w-regular:400; --w-medium:500; --w-semibold:600;

  /* åŠ¨æ•ˆæ›²çº¿ */
  --ease:cubic-bezier(.22,.61,.36,1);
}

/* ---------- å­—ä½“æ ˆï¼ˆè‹¹æ–¹ä¼˜å…ˆï¼‰ ---------- */
html { -webkit-text-size-adjust: 100%; }
body, .card {
  font-family:"PingFang SC","SF Pro Text","SF Pro Display","Microsoft YaHei","Noto Sans CJK SC",yh,-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}
.h1, .bar-title { font-family:"PingFang SC","SF Pro Display","Microsoft YaHei","Noto Sans CJK SC",yh,sans-serif; font-weight:600; }
.h2, .note, .related, .answer { font-family:"PingFang SC","Microsoft YaHei","Noto Sans CJK SC",yh,sans-serif; font-weight:400; }
pre, code, kbd, samp {
  font-family:"Maple Mono NF CN","JetBrains Mono","SFMono-Regular",
               ui-monospace,Menlo,Monaco,Consolas,"Liberation Mono",monospace;
}

/* ---------- å…¨å±€ ---------- */
body { background:var(--ios-bg); color:var(--ios-label); }
.card{
  background:transparent;
  color:var(--ios-label);
  font-size:var(--fs-base);
  line-height:var(--lh);
  margin:0;
}
.card, .section {
  word-wrap:break-word;
  overflow-wrap:anywhere;
}

a{ color:var(--ios-blue); text-decoration:none; }
a:hover{ text-decoration:underline; }
img{ max-width:100%; height:auto; display:block; margin:.25rem 0;
  transition:transform .18s var(--ease), opacity .18s var(--ease); }
ul,ol{ margin:.25rem 0 .25rem 1.25rem; padding-left:1rem; }
li{ margin:.15rem 0; }
i{ font-family:times,"Times New Roman",serif; padding-right:3px; }
u{ text-decoration:none; background:#fff59b; border-bottom:2px solid var(--ios-orange); }
hr{ height:1px; border:none; background:var(--ios-separator); margin:.6rem 0 .8rem; }
#time{ color:var(--ios-secondary); font-weight:500; }

/* ---------- ç»“æ„ï¼šæ /åˆ†ç»„ ---------- */
.bar{
  display:flex; align-items:center; gap:.5rem;
  padding:calc(var(--ios-pad-y) - .1rem) var(--ios-pad-x);
  border-left:4px solid currentColor;
  border-radius:var(--ios-radius);
  margin-bottom:var(--gap);
  font-weight:var(--w-semibold);
  font-size:var(--fs-title);
  background:var(--ios-card-alt);
  border:1px solid var(--ios-separator);
  box-shadow:0 1px 1px rgba(0,0,0,.02);
}
.bar-title{ flex:1 1 auto; letter-spacing:.2px; }

.icon{
  width:24px; height:24px; flex:0 0 24px;
  background-size:90% 90%;
  background-repeat:no-repeat;
  background-position:center;
  background-color: transparent;
  border-radius:999px;
}
.icon img {
  width:100%;
  height:100%;
  display:block;
  border-radius:999px;
}
.section{
  padding:var(--ios-pad-y) var(--ios-pad-x);
  border-radius:var(--ios-radius);
  margin:var(--ios-gap) 0;
  background:var(--ios-card);
  border:1px solid var(--ios-separator);
  box-shadow:0 1px 1px rgba(0,0,0,.02);
  backdrop-filter:saturate(120%) blur(6px);
  -webkit-backdrop-filter:saturate(120%) blur(6px);
}
@supports not ((backdrop-filter: blur(6px)) or (-webkit-backdrop-filter: blur(6px))) {
  .section{ background: rgba(255,255,255,0.98); }
  @media (prefers-color-scheme:dark){ .section{ background: rgba(28,28,30,0.98); } }
}
.h1{ font-size:var(--fs-title); }
.h2{ font-size:var(--fs-base); }

/* ---------- è¯­ä¹‰è‰² ---------- */
.xleft{ color:var(--ios-orange); } /* é—®é¢˜ */
.yleft{ color:var(--ios-blue); }   /* ç­”æ¡ˆ/ç¬”è®° */
.zleft{ color:var(--ios-green); }  /* ç›¸å…³çŸ¥è¯† */

/* ğŸ‘‰ æœ¬åœ°å›¾æ ‡åä¿æŒä¸å˜ */
.ximg{ background-image:url('_x_ios.svg'); }
.yimg{ background-image:url('_y_ios.svg'); }
.zimg{ background-image:url('_z_ios.svg'); }

/* Cloze é«˜äº® */
.cloze{
  color:var(--ios-blue);
  font-weight:700;
  padding:0 .2em;
  background:rgba(10,132,255,.08);
  border-radius:6px;
}

/* ---------- åŠ¨æ•ˆ ---------- */
.slide{
  position:relative;
  will-change:transform,opacity;
  animation:slide-in 280ms var(--ease) both;
}
@keyframes slide-in{
  from{opacity:0; transform:translateY(12px);}
  to{opacity:1; transform:translateY(0);}
}
.breath{
  animation:breath 2.8s ease-in-out infinite;
  transform-origin:center;
}
@keyframes breath{
  0%{transform:scale(1); opacity:.96;}
  50%{transform:scale(1.02); opacity:1;}
  100%{transform:scale(1); opacity:.96;}
}
@media (prefers-reduced-motion:reduce){ .slide,.breath{ animation:none !important; } }

/* ---------- å®ç”¨å¢å¼ºï¼šè¡¨æ ¼/ä»£ç /æ»šåŠ¨ ---------- */
.scroll-x{ overflow-x:auto; -webkit-overflow-scrolling:touch; padding-bottom:.25rem; }
.scroll-x:empty { padding-bottom:0; }
.table{ border-collapse:collapse; width:100%; }
.table th, .table td{ border:1px solid var(--ios-separator); padding:.45rem .6rem; vertical-align:top; }
.table thead th{ background:rgba(118,118,128,.08); font-weight:var(--w-medium); }

pre.code,
code.code,
.code {
  background: rgba(118,118,128,.06);
  border: 1px solid rgba(60,60,67,.08);
  border-radius: 10px;
  padding: .45rem .6rem;
  font-size: .9rem;
  line-height: 1.55;
  overflow-x: auto;
  max-width: 100%;
  box-sizing: border-box;
}
pre.code {
  white-space: pre-wrap;
  word-break: break-word;
}

/* å›¾ç‰‡ç‚¹å‡»æ”¾å¤§æ€ */
img.zoomed{
  position:relative; z-index:3;
  transform:scale(1.6);
  box-shadow:0 8px 24px rgba(0,0,0,.2);
  border-radius:8px;
  max-height:80vh;
  object-fit:contain;
}

/* æ”¾å¤§æ—¶åŠ ä¸€å±‚æš—ç½© */
body.zooming::before {
  content:"";
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.25);
  z-index:2;
  pointer-events:none;
}

/* å¾½æ ‡ï¼ˆTagsï¼‰ */
.badge{
  display:inline-block;
  padding:.15rem .5rem;
  border-radius:999px;
  font-size:.86em;
  font-weight:var(--w-medium);
  background:rgba(10,132,255,.12);
  color:var(--ios-blue);
  border:1px solid rgba(10,132,255,.22);
}

/* å°å±é€‚é…ï¼ˆAnki æ‰‹æœºï¼‰ */
@media (max-width: 480px) {
  .section { padding:.55rem .65rem; }
  .bar { padding:.55rem .65rem; align-items:flex-start; }

  .card,
  .section,
  .h1,
  .h2,
  .answer,
  .note,
  .related,
  .bar-title {
    text-align: left !important;
  }
  .bar-title {
    display: block;
    width: 100%;
  }
  .card { font-size:0.95rem; }
}

/* ---------- æ·±è‰²æ¨¡å¼ï¼ˆç³»ç»Ÿè‡ªåŠ¨ï¼‰ ---------- */
@media (prefers-color-scheme:dark){
  :root{
    --ios-label:#f2f2f7;
    --ios-secondary:rgba(235,235,245,.65);
    --ios-tertiary:rgba(235,235,245,.36);
    --ios-quaternary:rgba(235,235,245,.20);
    --ios-separator:rgba(84,84,88,.55);
    --ios-bg:#0f0f10;
    --ios-card:rgba(28,28,30,.94);
    --ios-card-alt:rgba(28,28,30,.86);
    --ios-blue:#7db3ff;
    --ios-green:#32d074;
    --ios-orange:#ffb257;
  }
  body{ background:linear-gradient(180deg,#0d0d0e 0%,#1a1a1b 100%); color:var(--ios-label); }
  a{ color:var(--ios-blue); }
  .cloze{ background:rgba(125,179,255,.18); }

  .table { color:var(--ios-label); }
  .table thead th{ background:rgba(235,235,245,.06); }

  table{ color:var(--ios-label); }
  th{ background:rgba(235,235,245,.06); color:var(--ios-blue); border-bottom:1px solid var(--ios-separator); }
  td{ border-bottom:1px solid rgba(235,235,245,.10); }
  tr:nth-child(even) td{ background:rgba(235,235,245,.05); }
  td strong{ color:var(--ios-blue); }

  .nightMode .code, .night_mode .code;
}

/* ---------- æ·±è‰²æ¨¡å¼ï¼ˆAnki nightMode / night_mode å¼ºåˆ¶ï¼‰ ---------- */
.nightMode, .night_mode{
  --ios-label:#f2f2f7;
  --ios-secondary:rgba(235,235,245,.65);
  --ios-tertiary:rgba(235,235,245,.36);
  --ios-quaternary:rgba(235,235,245,.20);
  --ios-separator:rgba(84,84,88,.55);
  --ios-bg:#0f0f10;
  --ios-card:rgba(28,28,30,.94);
  --ios-card-alt:rgba(28,28,30,.86);
  --ios-blue:#7db3ff;
  --ios-green:#32d074;
  --ios-orange:#ffb257;
}
body.nightMode, body.night_mode { background:var(--ios-bg); color:var(--ios-label); }
body.nightMode .card, body.night_mode .card { background:var(--ios-bg); color:var(--ios-label); }
.nightMode .xleft, .night_mode .xleft{ color:var(--ios-orange); }
.nightMode .yleft, .night_mode .yleft{ color:var(--ios-blue); }
.nightMode .zleft, .night_mode .zleft{ color:var(--ios-green); }
.nightMode .hint, .night_mode .hint{ color:var(--ios-secondary); }
.nightMode u, .night_mode u{ color:inherit; background:transparent; border-bottom:2px solid var(--ios-tertiary); }
.nightMode img, .night_mode img{ filter:brightness(.98) saturate(1.05); }
.nightMode hr, .night_mode hr{ background:var(--ios-separator); }
.nightMode .ximg, .night_mode .ximg{ background-image:url('_x_ios.svg'); }
.nightMode .yimg, .night_mode .yimg{ background-image:url('_y_ios.svg'); }
.nightMode .zimg, .night_mode .zimg{ background-image:url('_z_ios.svg'); }

.nightMode pre.code, .night_mode pre.code,
.nightMode code.code, .night_mode code.code,
.nightMode .code, .night_mode .code {
  background:rgba(235,235,245,.06);
  border:1px solid var(--ios-separator);
}

.nightMode .badge, .night_mode .badge{
  background:rgba(125,179,255,.14);
  color:var(--ios-blue);
  border:1px solid rgba(125,179,255,.28);
}
.nightMode .icon, .night_mode .icon {
  background-color: rgba(255,255,255,0.03);
}

